version: 2
models:
- name: snapshot_payer_transitions
  description: The table is about current insurance coverage for patients. It tracks
    the most recent version of each patient's insurance information. The table includes
    patient and member IDs, current coverage dates, primary and secondary payers,
    plan ownership, and owner name. Each row represents the latest insurance details
    for a unique patient. The table omits historical coverage periods and focuses
    on the current status.
  columns:
  - name: plan_ownership
    description: Type of insurance plan ownership
    tests:
    - accepted_values:
        values:
        - Self
        - Guardian
        - Spouse
    cocoon_meta:
      missing_reason: Unknown
      future_accepted_values:
      - Parent
      - Child
      - Employer
      - Other
      data_type:
        current_data_type: VARCHAR
  - name: owner_name
    description: Name of the insurance plan owner
    cocoon_meta:
      missing_reason: Unknown
      data_type:
        current_data_type: VARCHAR
  - name: member_id
    description: Unique identifier for the insurance member
    cocoon_meta:
      missing_reason: Unknown
      data_type:
        current_data_type: UUID
  - name: patient_id
    description: Unique identifier for the patient
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: UUID
  - name: primary_payer_id
    description: Primary insurance payer identifier
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: UUID
  - name: secondary_payer_id
    description: Secondary insurance payer identifier
    cocoon_meta:
      missing_reason: Not all patients have a secondary insurance payer.
      data_type:
        current_data_type: UUID
cocoon_meta:
  scd_base_table: stg_payer_transitions
  scd_columns:
  - coverage_start_date
  - coverage_end_date
