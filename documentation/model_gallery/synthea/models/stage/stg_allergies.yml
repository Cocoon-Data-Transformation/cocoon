version: 2
models:
- name: stg_allergies
  description: The table is about allergies. It contains details of various allergens
    a patient is allergic to. Each row represents a specific allergy, including its
    code, description, type, and category. Some allergies have associated reactions
    and their severities. The allergies are primarily environmental, such as bee venom,
    mold, dust mites, animal dander, and grass pollen.
  columns:
  - name: coding_system
    description: Coding system used for the allergen code
    tests:
    - not_null
    - accepted_values:
        values:
        - SNOMED-CT
        - RxNorm
    cocoon_meta:
      future_accepted_values:
      - ICD-10
      - LOINC
      - CPT
      - HCPCS
      - NDC
      - ATC
      - MeSH
      - UMLS
      - DSM-5
      - ICD-O
      - ICF
      - ICPC
      - Read Codes
      data_type:
        current_data_type: VARCHAR
  - name: allergen_description
    description: Description of the allergen
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: VARCHAR
  - name: sensitivity_type
    description: Type of sensitivity (e.g., allergy)
    tests:
    - not_null
    - accepted_values:
        values:
        - allergy
        - intolerance
    cocoon_meta:
      future_accepted_values:
      - hypersensitivity
      - autoimmune
      - idiosyncratic reaction
      - pharmacological side effect
      - toxicity
      - anaphylaxis
      - contact dermatitis
      - food sensitivity
      - drug sensitivity
      - chemical sensitivity
      - environmental sensitivity
      data_type:
        current_data_type: VARCHAR
  - name: allergen_category
    description: Category of the allergen (e.g., environment)
    tests:
    - not_null
    - accepted_values:
        values:
        - environment
        - food
        - medication
    cocoon_meta:
      future_accepted_values:
      - insect
      - latex
      - occupational
      - other
      data_type:
        current_data_type: VARCHAR
  - name: primary_reaction_description
    description: Description of the first allergic reaction
    tests:
    - accepted_values:
        values:
        - Anaphylaxis (disorder)
        - Eruption of skin (disorder)
        - Rhinoconjunctivitis (disorder)
        - Allergic angioedema (disorder)
        - Allergic skin rash
        - Dyspnea (finding)
        - Wheal (finding)
        - Cough (finding)
        - Nose running
        - Sneezing
    cocoon_meta:
      missing_reason: Unknown
      future_accepted_values:
      - Urticaria (disorder)
      - Itching of skin
      - Wheeze
      - Throat tightness
      - Nausea
      - Vomiting
      - Diarrhea
      - Abdominal pain
      - Dizziness
      - Tachycardia
      - Hypotension
      - Syncope
      - Confusion
      - Anxiety
      data_type:
        current_data_type: VARCHAR
  - name: primary_reaction_severity
    description: Severity of the first allergic reaction
    tests:
    - accepted_values:
        values:
        - MODERATE
        - MILD
        - SEVERE
    cocoon_meta:
      missing_reason: Unknown
      data_type:
        current_data_type: VARCHAR
  - name: secondary_reaction_description
    description: Description of the second allergic reaction
    cocoon_meta:
      missing_reason: Unknown
      data_type:
        current_data_type: VARCHAR
  - name: secondary_reaction_severity
    description: Severity of the second allergic reaction
    tests:
    - accepted_values:
        values:
        - MILD
        - MODERATE
    cocoon_meta:
      missing_reason: Unknown
      future_accepted_values:
      - SEVERE
      - LIFE-THREATENING
      - NONE
      data_type:
        current_data_type: VARCHAR
  - name: allergen_code
    description: Standardized code for the allergen
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: VARCHAR
  - name: allergy_end_date
    description: Date when allergy is no longer active (if applicable)
    cocoon_meta:
      missing_reason: Ongoing allergies don't have an end date.
      data_type:
        current_data_type: DATE
  - name: allergy_start_date
    description: Date when allergy was first recorded
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: DATE
  - name: encounter_id
    description: Unique identifier for the medical encounter
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: UUID
  - name: patient_id
    description: Unique identifier for the patient
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: UUID
  - name: primary_reaction_code
    description: Code for the first allergic reaction
    cocoon_meta:
      missing_reason: Unknown
      data_type:
        current_data_type: VARCHAR
  - name: secondary_reaction_code
    description: Code for the second allergic reaction
    cocoon_meta:
      missing_reason: Unknown
      data_type:
        current_data_type: VARCHAR
