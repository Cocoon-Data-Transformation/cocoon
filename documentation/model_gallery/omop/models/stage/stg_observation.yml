version: 2
models:
- name: stg_observation
  description: The table is about medical observations. It includes patient identifiers,
    observation dates and times, measured values, providers, visits, and observation
    details. Each row represents a single observation with its unique ID. The table
    captures both numeric and string values, along with source information and qualifiers
    for the observations.
  columns:
  - name: observation_id
    description: Unique identifier for each observation
    tests:
    - not_null
    - unique
    cocoon_meta:
      unique_reason: This column appears to be a unique identifier for each observation.
        In the sample data, it has different values for each row, suggesting it's
        designed to be a unique key for each observation record.
      data_type:
        current_data_type: INT
  - name: person_id
    description: Unique identifier for each patient
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: INT
  - name: value_as_number
    description: Numeric value of the observation
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: DECIMAL
  - name: value_as_string
    description: String description of the observation result
    tests:
    - not_null
    - accepted_values:
        values:
        - Elevated
        - Normal
    cocoon_meta:
      future_accepted_values:
      - Low
      - Critical
      - Inconclusive
      - Abnormal
      - Within reference range
      - Borderline
      - Positive
      - Negative
      - Indeterminate
      data_type:
        current_data_type: VARCHAR
  - name: provider_id
    description: Unique identifier for the healthcare provider
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: INT
  - name: visit_occurrence_id
    description: Unique identifier for the patient visit
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: INT
  - name: observation_source_value
    description: This field houses the verbatim value from the source data representing
      the Observation that occurred. For example, this could be an ICD10 or Read code.
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: VARCHAR
  - name: unit_source_value
    description: This field contains the exact value from the source data that represents
      the unit of measurement used.
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: VARCHAR
  - name: qualifier_source_value
    description: This field houses the verbatim value from the source data representing
      the qualifier of the Observation that occurred.
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: VARCHAR
  - name: observation_date
    description: Date when the observation was made
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: DATE
  - name: observation_datetime
    description: Date and time when the observation was made
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: TIMESTAMP
