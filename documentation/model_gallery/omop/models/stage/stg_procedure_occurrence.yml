version: 2
models:
- name: stg_procedure_occurrence
  description: The table is about medical procedure occurrences. It includes details
    such as the patient (person_id), procedure date and time, quantity, provider,
    associated visit, procedure source value, and cost. Each procedure occurrence
    has a unique identifier. The table captures important information about medical
    procedures performed on patients.
  columns:
  - name: procedure_occurrence_id
    description: Unique identifier for each procedure occurrence
    tests:
    - not_null
    - unique
    cocoon_meta:
      unique_reason: This column is a unique identifier for each procedure occurrence.
        For this table, each row represents a distinct procedure occurrence, and procedure_occurrence_id
        is unique across rows.
      data_type:
        current_data_type: INT
  - name: person_id
    description: Unique identifier for the patient
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: INT
  - name: quantity
    description: Number of times the procedure was performed
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: INT
  - name: provider_id
    description: Unique identifier for the healthcare provider
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: INT
  - name: visit_occurrence_id
    description: Identifier for the associated visit
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: INT
  - name: visit_detail_id
    description: Identifier for specific details of the visit
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: INT
  - name: procedure_source_value
    description: This field houses the verbatim value from the source data representing
      the procedure that occurred. For example, this could be an CPT4 or OPCS4 code.
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: VARCHAR
  - name: procedure_cost
    description: Cost of the procedure
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: DECIMAL
  - name: procedure_date
    description: Date when the procedure was performed
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: DATE
  - name: procedure_datetime
    description: Date and time when the procedure was performed
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: TIMESTAMP
  - name: qualifier_source_value
    description: This field houses the verbatim value from the source data representing
      the qualifier of the Observation that occurred.
    cocoon_meta:
      missing_reason: Not all procedures require additional qualifiers or modifiers.
      data_type:
        current_data_type: VARCHAR
