version: 2
models:
- name: stg_condition_occurrence
  description: The table is about condition occurrences for patients. It includes
    details like condition start and end dates, provider, visit information, condition
    source, and status. Each row represents a specific medical condition instance
    for a patient, identified by a unique condition_occurrence_id. The table links
    conditions to patients via person_id and to healthcare visits via visit_occurrence_id.
  columns:
  - name: condition_occurrence_id
    description: Unique identifier for each condition occurrence
    tests:
    - not_null
    - unique
    cocoon_meta:
      unique_reason: This column is a unique identifier for each condition occurrence.
        For this table, each row represents a specific medical condition instance
        for a patient. condition_occurrence_id is unique across rows.
      data_type:
        current_data_type: INT
  - name: person_id
    description: Unique identifier for each patient
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: INT
  - name: stop_reason
    description: Reason for the condition ending or stopping
    tests:
    - not_null
    - accepted_values:
        values:
        - Improved
        - Resolved
    cocoon_meta:
      future_accepted_values:
      - Worsened
      - Unchanged
      - Treatment completed
      - Patient request
      - Side effects
      - Lack of efficacy
      - Condition became chronic
      - Transferred to specialist care
      - Lost to follow-up
      - Deceased
      - Other
      data_type:
        current_data_type: VARCHAR
  - name: provider_id
    description: Identifier for the healthcare provider
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: INT
  - name: visit_occurrence_id
    description: Identifier for the associated healthcare visit
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: INT
  - name: visit_detail_id
    description: Identifier for specific details of the visit
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: INT
  - name: condition_source_value
    description: Original or source value of the condition
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: VARCHAR
  - name: condition_status_source_value
    description: Status of the condition from the source
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: VARCHAR
  - name: condition_end_date
    description: Date when the condition was resolved or ended
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: DATE
  - name: condition_end_datetime
    description: Date and time when the condition was resolved or ended
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: TIMESTAMP
  - name: condition_start_date
    description: Date when the condition was first recorded
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: DATE
  - name: condition_start_datetime
    description: Date and time when the condition was first recorded
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: TIMESTAMP
