version: 2
models:
- name: stg_visit_detail
  description: The table is about patient visit details. It includes information such
    as visit ID, patient ID, visit start and end dates/times, provider ID, care site
    ID, and visit source values. Each row represents a unique visit detail, with links
    to the patient and the broader visit occurrence. The table captures both outpatient
    and inpatient visits, as well as emergency room visits.
  columns:
  - name: visit_detail_id
    description: Unique identifier for each visit detail
    tests:
    - not_null
    - unique
    cocoon_meta:
      unique_reason: This column represents a unique identifier for each visit detail.
        For this table, each row represents a unique visit detail, and visit_detail_id
        is unique across rows.
      data_type:
        current_data_type: INT
  - name: person_id
    description: Unique identifier for each patient
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: INT
  - name: provider_id
    description: Unique identifier for the healthcare provider
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: INT
  - name: care_site_id
    description: Identifier for the location of care
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: INT
  - name: visit_detail_source_value
    description: Source value of the visit detail
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: VARCHAR
  - name: visit_occurrence_id
    description: Identifier linking to broader visit occurrence
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: INT
  - name: admitting_source_value
    description: Source value of  admission for the visit
    cocoon_meta:
      missing_reason: Not applicable for outpatient or emergency room visits.
      data_type:
        current_data_type: VARCHAR
  - name: discharge_to_source_value
    description: Source value of discharge destination for the visit
    cocoon_meta:
      missing_reason: Not applicable for outpatient or single-day visits.
      data_type:
        current_data_type: VARCHAR
  - name: visit_detail_end_date
    description: Date when the visit detail ended
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: DATE
  - name: visit_detail_end_datetime
    description: Date and time when the visit detail ended
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: TIMESTAMP
  - name: visit_detail_start_date
    description: Date when the visit detail started
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: DATE
  - name: visit_detail_start_datetime
    description: Date and time when the visit detail started
    tests:
    - not_null
    cocoon_meta:
      data_type:
        current_data_type: TIMESTAMP
